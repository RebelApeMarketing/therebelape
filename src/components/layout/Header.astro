---
import PreHeader from './PreHeader.astro';
import Button from '../ui/Button.astro';
import Breadcrumbs from './Breadcrumbs.astro';
---

<header class="w-full border-b border-gray-200">

    <PreHeader />

    <!-- Main Header -->
    <div class="max-w-7xl mx-auto px-6 py-1 flex items-center justify-between">
        
        <!-- Logo Left -->
        <div class="shrink-0">
            <a href="/">
                <img 
                src="https://RebelApeCDN.b-cdn.net/Rebel%20Website/Branding/logo-rebel-ape-4-core.svg" 
                alt="Rebel Ape Marketing Logo"
                class="w-70 h-auto"
                />
            </a>
        </div>

        <!-- Navigation -->
        <nav class="hidden lg:flex gap-6 ml-auto mr-8 text-lg font-light tracking-wide">
            <a href="/website-design-for-contractors" class="hover:text-rebel-green transition">Website Design</a>
            <a href="/ads-for-contractors" class="hover:text-rebel-green transition">Ads</a>
            <a href="/case-studies" class="hover:text-rebel-green transition">Case Studies</a>
            <a href="/contact" class="hover:text-rebel-green transition">Contact</a>
        </nav>

        <!-- Right section: Mobile Menu Button + Schedule -->
        <div class="flex items-center gap-2 ml-auto lg:ml-0">
          <!-- Mobile Menu Button -->
          <button id="mobileMenuBtn" class="lg:hidden inline-flex items-center justify-center p-2 rounded border border-gray-200" aria-label="Open menu" aria-expanded="false" aria-controls="mobileMenuPanel">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6">
              <path fill-rule="evenodd" d="M3 6.75A.75.75 0 0 1 3.75 6h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 6.75ZM3 12a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75A.75.75 0 0 1 3 12Zm0 5.25a.75.75 0 0 1 .75-.75h16.5a.75.75 0 0 1 0 1.5H3.75a.75.75 0 0 1-.75-.75Z" clip-rule="evenodd" />
            </svg>
          </button>

          <!-- Schedule button (tablet and up) -->
          <div class="hidden md:block">
            <Button />
          </div>
        </div>
    </div>

    <Breadcrumbs />

    <!-- Mobile Offâ€‘Canvas Menu -->
    <div id="mobileMenuOverlay" class="fixed inset-0 bg-black/40 opacity-0 pointer-events-none transition-opacity lg:hidden z-40"></div>

    <aside id="mobileMenuPanel" class="fixed top-0 right-0 h-full w-80 max-w-[85vw] bg-gray-950 dark:bg-gray-950 shadow-xl translate-x-full transition-transform lg:hidden z-50" aria-hidden="true">
      <div class="flex items-center justify-between px-4 h-14 border-b border-gray-800 dark:border-gray-800">
        <span class="font-semibold text-white dark:text-white">Menu</span>
        <button id="mobileMenuClose" class="inline-flex items-center justify-center p-2 rounded border border-gray-700 dark:border-gray-700" aria-label="Close menu">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24" fill="currentColor" class="size-6 text-white dark:text-white">
            <path fill-rule="evenodd" d="M5.47 5.47a.75.75 0 0 1 1.06 0L12 10.94l5.47-5.47a.75.75 0 1 1 1.06 1.06L13.06 12l5.47 5.47a.75.75 0 1 1-1.06 1.06L12 13.06l-5.47 5.47a.75.75 0 0 1-1.06-1.06L10.94 12 5.47 6.53a.75.75 0 0 1 0-1.06Z" clip-rule="evenodd" />
          </svg>
        </button>
      </div>
      <nav class="px-4 py-4 grid gap-4 text-lg">
        <a href="/website-design-for-contractors" class="py-2 text-gray-100 dark:text-gray-100 hover:text-rebel-green dark:hover:text-white transition">Website Design</a>
        <a href="/ads-for-contractors" class="py-2 text-gray-100 dark:text-gray-100 hover:text-white dark:hover:text-rebel-green transition">Ads</a>
        <a href="/case-studies" class="py-2 text-gray-100 dark:text-gray-100 hover:text-white dark:hover:text-rebel-green transition">Case Studies</a>
        <a href="/contact" class="py-2 text-gray-100 dark:text-gray-100 hover:text-white dark:hover:text-rebel-green transition">Contact</a>
        <a href="https://schedule.therebelape.com" class="mt-2 inline-flex items-center justify-center rounded-[5px] px-4 py-2 bg-[#FECF36] text-black font-semibold shadow-sm hover:bg-[#fcd34d] transition">Schedule</a>
      </nav>
    </aside>

    <script is:inline>
      const btn = document.getElementById('mobileMenuBtn');
      const panel = document.getElementById('mobileMenuPanel');
      const closeBtn = document.getElementById('mobileMenuClose');
      const overlay = document.getElementById('mobileMenuOverlay');

      function openMenu() {
        panel.classList.remove('translate-x-full');
        overlay.classList.remove('pointer-events-none');
        overlay.classList.add('opacity-100');
        btn.setAttribute('aria-expanded', 'true');
        panel.setAttribute('aria-hidden', 'false');
        closeBtn.focus();
      }

      function closeMenu() {
        panel.classList.add('translate-x-full');
        overlay.classList.add('pointer-events-none');
        overlay.classList.remove('opacity-100');
        btn.setAttribute('aria-expanded', 'false');
        panel.setAttribute('aria-hidden', 'true');
      }

      btn?.addEventListener('click', openMenu);
      closeBtn?.addEventListener('click', closeMenu);
      overlay?.addEventListener('click', closeMenu);
      document.addEventListener('keydown', (e) => {
        if (e.key === 'Escape') closeMenu();
      });
    </script>

</header>