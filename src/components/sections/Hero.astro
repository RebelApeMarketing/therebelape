---
import Button from '../ui/Button.astro';

interface Props {
  title: string;
  subtitle: string;
  description: string;
  backgroundImage?: string;
  features?: string[];
  showScheduleButton?: boolean;
  buttonText?: string;
  buttonIcon?: 'phone' | 'calendar' | 'envelope' | 'learn' | 'download' | 'none';
  buttonHref?: string;
  fetchpriority?: 'high' | 'low' | 'auto';
}

const {
  title,
  subtitle,
  description,
  backgroundImage = 'https://RebelApeCDN.b-cdn.net/bg-gorilla-direct.webp',
  features = [
    'Lightening Fast Websites',
    'Expert Ad Campaigns',
    'Transparent Results'
  ],
  showScheduleButton = true,
  buttonText = 'Schedule Strategy Session',
  buttonIcon = 'phone',
  buttonHref = '/schedule',
  fetchpriority = 'high'
} = Astro.props;
---

<section
  class="w-full py-15 relative overflow-hidden bg-center bg-top text-center"
  style={`background-image: url('${backgroundImage}'); background-size: cover;`}
  data-fetchpriority={fetchpriority}
>

  <div class="absolute inset-0 bg-black/75 z-0"></div>

  <div class="max-w-7xl text-white mx-auto px-6 md:py-8 relative z-10">
    <div class="flex flex-col gap-8 items-center text-center">

      <h1 class="text-5xl md:text-7xl font-black py-1" set:html={title}>
      </h1>

      <h2 class="text-2xl md:text-3xl font-semibold mt-2 py-1" set:html={subtitle}>
      </h2>

      <p class="max-w-5xl text-xl leading-8 py-1" set:html={description}>
      </p>

      {showScheduleButton && (
        <div class="flex justify-start md:justify-start mt-4 mb-4">
          <div class="w-auto inline-block transform scale-110">
            <Button text={buttonText} icon={buttonIcon} href={buttonHref} />
          </div>
        </div>
      )}

      {features && features.length > 0 && (
        <p class="flex flex-col md:flex-row gap-3 md:space-x-4 text-md justify-center items-center text-center">
          {features.map((feature) => (
            <span class="inline-block">
              <span class="text-rebel-green mr-2">âœ“</span> {feature}
            </span>
          ))}
        </p>
      )}

    </div>
  </div>

  <script define:vars={{ fetchpriority }}>
    // Apply fetchpriority to background image if possible
    // Note: CSS background images don't support fetchpriority natively,
    // but we can preload the image in the document head
    if (fetchpriority === 'high') {
      const bgUrl = document.currentScript.parentElement.style.backgroundImage;
      if (bgUrl) {
        const link = document.createElement('link');
        link.rel = 'preload';
        link.as = 'image';
        link.href = bgUrl.slice(5, -2); // Extract URL from url('...')
        document.head.appendChild(link);
      }
    }
  </script>
</section>